<!doctype html>
<html lang="zh">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>简易新闻汇聚</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;max-width:820px;margin:28px auto;padding:0 12px;line-height:1.55}
  header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
  .badge{font-size:12px;background:#eef;border-radius:999px;padding:4px 10px}
  ul{list-style:none;padding:0;margin:0}
  li{padding:10px 0;border-bottom:1px solid #eee}
  a{color:#0b57d0;text-decoration:none}
  a:hover{text-decoration:underline}
  small{color:#666}
</style>
<header>
  <h1>📰 简易新闻汇聚</h1>
  <div id="updated" class="badge">更新中…</div>
</header>
<ul id="list"></ul>
<script>
function timeAgo(ts){
  const diff = Math.floor(Date.now()/1000 - ts);
  const u=[["天",86400],["小时",3600],["分钟",60]];
  for(const [n,s] of u){ if(diff>=s) return Math.floor(diff/s)+n+"前"; }
  return "刚刚";
}
fetch("news.json?_="+Date.now())
  .then(r=>r.json())
  .then(d=>{
    document.getElementById("updated").textContent = "更新于 " + new Date(d.updated*1000).toLocaleString();
    const list = document.getElementById("list");
    d.items.forEach(it=>{
      const li = document.createElement("li");
      li.innerHTML = `<a href="${it.url}" target="_blank" rel="noopener">${it.title}</a>
        <div><small>来源：${it.source} · ${timeAgo(it.published)}</small></div>`;
      list.appendChild(li);
    });
  })
  .catch(()=>{ document.getElementById("updated").textContent="无法加载新闻数据";});
</script>
</html>
